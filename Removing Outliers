# Visualizing the distribution of numerical features and identifying potential outliers using box plots.
numerical_cols = ['Inches', 'Weight', 'Price_euros']

plt.figure(figsize=(15, 5))
for i, col in enumerate(numerical_cols):
    plt.subplot(1, 3, i + 1)
    sns.boxplot(y=df[col])
    plt.title(f'Box Plot of {col}')
plt.tight_layout()
plt.show()
# Define functions to remove outliers using the Interquartile Range (IQR) and Z-score methods.
# The choice of method depends on the distribution of the data and the nature of outliers.

# Function to remove outliers using IQR
def remove_outliers_iqr(df, column):
    Q1 = df[column].quantile(0.25)
    Q3 = df[column].quantile(0.75)
    IQR = Q3 - Q1
    lower_bound = Q1 - 1.5 * IQR
    upper_bound = Q3 + 1.5 * IQR
    df_cleaned = df[(df[column] >= lower_bound) & (df[column] <= upper_bound)].copy()
    return df_cleaned

# Function to remove outliers using Z-score
def remove_outliers_zscore(df, column, threshold=3):
    z_scores = np.abs((df[column] - df[column].mean()) / df[column].std())
    df_cleaned = df[z_scores < threshold].copy()
    return df_cleaned

# Convert 'Weight' to numeric before outlier removal by removing 'kg' and casting to float.
df['Weight'] = df['Weight'].str.replace('kg', '').astype(float)


# Apply outlier removal to 'Price_euros' and 'Weight' using the IQR method, suitable for potentially skewed distributions.
df_cleaned_iqr = remove_outliers_iqr(df, 'Price_euros')
df_cleaned_iqr_weight = remove_outliers_iqr(df_cleaned_iqr, 'Weight')

# Apply outlier removal to 'Inches' using the Z-score method, suitable for data closer to a normal distribution.
df_cleaned = remove_outliers_zscore(df_cleaned_iqr_weight, 'Inches')

# Print the shape of the original and cleaned DataFrames to show the number of removed rows.
print(f"Original shape: {df.shape}")
print(f"Shape after removing outliers: {df_cleaned.shape}")
# Getting concise information about the DataFrame after outlier removal to check data types and non-null counts.
df.info()

# Display the first few rows of the cleaned DataFrame.
display(df_cleaned.head())
